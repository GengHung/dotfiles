# change shell to zsh
if [ $SHELL != '/bin/zsh' ]; then
    echo $SHELL
    chsh -s /bin/zsh
fi

# main program
echo "=> This will install the files to: ${HOME}"
echo -ne "\r=> "

# Homebrew - The missing package manager for OS X
# http://brew.sh/
if ! type brew > /dev/null; then
    echo "=> Installing homebrew ..."
    echo -ne "\r=> "
    ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
else
    echo "=> homebrew exists, updating ..."
    echo -ne "\r=> "
    brew update
fi
echo "\r"
brew bundle
brew cleanup

# CocoaPods is the dependency manager for Objective-C projects
# http://cocoapods.org/
if ! type pod > /dev/null; then
    echo "=> Installing cocoapods ..."
    echo -ne "\r=> "
    sudo gem install cocoapods
else
    echo "=> cocoapods already exists, if you need update, execute \n $ sudo gem install cocoapods"
    echo -ne "\r=> "
fi
echo "\r"

echo "=> Copying Git Configurations ..."
cp git/gitconfig ~/.gitconfig
cp git/git-global-ignore ~/.git-global-ignore
cp git/git-global-attributes ~/.git-global-attributes
legit install
which git-pr && rm `which git-pr` # I don't need this, and it broken my alias `git pull --rebase`

echo "=> Copying PTMono fonts ..."
cp -fr fonts/PTMono/*ttf ~/Library/Fonts/

echo "=> Copying .zsh-theme ..."
cp -f theme/hanksudo.zsh-theme ~/.oh-my-zsh/themes/

echo "=> Copying .zshrc ..."
cp -f zsh/zshrc ~/.zshrc

echo "=> Copying .tmux.conf ..."
cp -f zsh/tmux.conf ~/.tmux.conf

echo "=> Copying .functions ..."
cp -f zsh/functions ~/.functions

# zsh plugin
if [ ! -d ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting ]
then
    echo "=> Installing zsh-syntax-highlighting ..."
    echo -ne "\r=> "
    git clone https://github.com/zsh-users/zsh-syntax-highlighting ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting
fi

if [ ! -d ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions ]
then
    echo "=> Installing zsh-autosuggestions ..."
    echo -ne "\r=> "
    git clone https://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions
fi

alias pip=pip2
# install python libraries
echo "=> Installing python libs... "
echo -ne "\r=> "
pip install --upgrade pip setuptools
pip install -r `pwd`/requirements.txt
